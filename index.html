<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <!-- Bootstrap CSS -->
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
      integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" type="text/css" href="index.css" />
    <!-- Font Awesome CSS -->
    <link
      rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.5.0/css/all.css"
      integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU"
      crossorigin="anonymous"
    />
    <!-- Roboto -->
    <link
      href="https://fonts.googleapis.com/css?family=Roboto"
      rel="stylesheet"
    />

    <title>Meta Me</title>
  </head>

  <body>
    <div class="landing-body">
      <div class="jumbotron bg-dark text-white">
        <div class="container">
          <div class="row">
            <div class="col-xs-12 col-lg-6">
              <div class="media">
                <img class="d-none mr-3 logo" src="assets/icon.png" />
                <div class="media-body text-center text-lg-left">
                  <h1 class="display-4 mt-5">Meta Me</h1>
                  <p class="lead display-5">
                    Insights on how you spend your time.
                  </p>

                  <form
                    id="registerForm"
                    class="form-inline justify-content-center justify-content-lg-start"
                  >
                    <div class="input-group">
                      <input
                        type="email"
                        name="email"
                        class="form-control"
                        placeholder="Enter email"
                      />
                      <div class="input-group-append">
                        <button
                          type="submit"
                          class="btn btn-primary"
                          disabled="disabled"
                        >
                          GET EARLY ACCESS
                        </button>
                      </div>
                    </div>
                  </form>
                </div>
              </div>
            </div>
            <div class="col-xs-12 col-lg-6 mt-4 mt-lg-0">
              <img src="assets/screenshot.png" width="100%" />
            </div>
          </div>
        </div>
      </div>
      <div class="container value-proposition">
        <div class="row justify-content-center">
          <div class="feature col-xs-12 col-md-6 col-lg-4 text-center mt-4">
            <img
              src="assets/automated_time_tracking.png"
              width="128"
              height="128"
            />
            <h5 class="mt-4">Automated Tracking</h5>
            <p class="text-secondary mt-3 mx-5">
              Meta Me runs in the background and collects data on how you use
              your computer.
            </p>
          </div>
          <div class="feature col-xs-12 col-md-6 col-lg-4 text-center mt-4">
            <img
              src="assets/productivity_analytics.png"
              width="128"
              height="128"
            />
            <h5 class="mt-4">Digital Awareness</h5>
            <p class="text-secondary mt-3 mx-5">
              Understand your daily usage patterns on the dashboard and become
              more productive.
            </p>
          </div>
          <div class="feature col-xs-12 col-md-6 col-lg-4 text-center mt-4">
            <img src="assets/private_by_default.png" width="128" height="128" />
            <h5 class="mt-4">Private by Design</h5>
            <p class="text-secondary mt-3 mx-5">
              Data is secured so that only you can decrypt it. No one but you
              can view your data (not even us).
            </p>
          </div>
        </div>
      </div>

      <footer>
        <div class="container text-muted text-center mb-3">
          Copyright 2018 MetaMe
        </div>
      </footer>
    </div>
  </body>

  <!-- Optional JavaScript -->
  <!-- jQuery first, then Popper.js, then Bootstrap JS -->
  <script
    src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
    integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
    crossorigin="anonymous"
  ></script>
  <script
    src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"
    integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
    crossorigin="anonymous"
  ></script>
  <script
    src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"
    integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
    crossorigin="anonymous"
  ></script>

  <!-- Telemetry -->
  <script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.3.1.min.js"></script>
  <script>
    const TELEMETRY_URL = "http://me.is-an-engineer.com:8091";
    const PRODUCT_ID = "fe17867f-2dfc-4046-956a-82ef162e508d";
    const VERSION = "1.0.0";
    const EMAIL_API_ENDPOINT_URL = "http://me.is-an-engineer.com:3001";

    function telemetryView() {
      $.ajax(
        `${TELEMETRY_URL}/TrackPageView?productId=${PRODUCT_ID}&version=${VERSION}`,
        {
          type: "POST",
          contentType: "application/json",
          data: JSON.stringify({ page: window.location.href })
        },
        function() {}
      );
    }

    window.onload = telemetryView();

    $(document).ready(function() {
      //enable or disable submit based on email value;
      $("input[type='email']").on("input", function(e) {
        var hasValue = $(this).val() != "";
        $("button[type='submit']").prop("disabled", !hasValue);
      });

      $("#registerForm").submit(function(e) {
        var values = {};
        $.each($(this).serializeArray(), function(i, field) {
          values[field.name] = field.value;
        });

        var email = values.email;
        var buttonText = $("button[type='submit']").text();
        $("button[type='submit']").prop("disabled", true);
        $("button[type='submit']").text("SUBMITTING...");

        $.ajax({
          type: "POST",
          url: EMAIL_API_ENDPOINT_URL + "/email/" + email,
          data: {}, // serializes the form's elements.
          success: function(data) {
            $(location).attr("href", "registrationSuccess.html");
          },
          error: function(jqxhr, status, error) {
            alert("Error:" + status + " " + error);
            $("button[type='submit']").prop("disabled", false);
            $("button[type='submit']").text(buttonText);
          }
        });

        e.preventDefault(); // avoid to execute the actual submit of the form.
      });
    });
  </script>
  <!-- Google Analytics -->
  <script
    async
    src="https://www.googletagmanager.com/gtag/js?id=UA-130179223-1"
  ></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() {
      dataLayer.push(arguments);
    }
    gtag("js", new Date());
    gtag("config", "UA-130179223-1");
  </script>
</html>
